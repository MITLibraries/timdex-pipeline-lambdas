name: Dev Build and Deploy Lambda
on:
  workflow_dispatch: # manual trigger in GitHub for easy testing
  pull_request:
    branches:
      - main
    paths-ignore:
      - '.github/**'

jobs:
  deploy:
    name: Dev Deploy Lambda Container
    # the shared workflow is currently in a feature branch, should get updated to @main when testing is complete
    uses: mitlibraries/.github/.github/workflows/lambda-shared-deploy.yml@container-flows-ssm
    with:
      # The two lines below are generated by Terraform and copy/pasted from the Terraform output
      GHA_ROLE: "timdex-pipeline-lambdas-gha-dev" 
      REGION: "us-east-1" 
    secrets:
      AWS_ACCT: ${{ secrets.AWS_ACCT_DEV }} # this is an org-wide secret
 